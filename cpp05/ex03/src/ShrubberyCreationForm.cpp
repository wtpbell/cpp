/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ShrubberyCreationForm.cpp                          :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: bewong <bewong@student.codam.nl>           +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/09/03 14:29:49 by bewong            #+#    #+#             */
/*   Updated: 2025/09/03 14:29:49 by bewong           ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "ShrubberyCreationForm.hpp"
#include "Bureaucrat.hpp"
#include <fstream>

ShrubberyCreationForm::ShrubberyCreationForm(const std::string& target) 
	: AForm("ShrubberyCreationForm", SHRUB_SIGNGRADE, SHRUB_EXECGRADE), _target(target) {}

const std::string&	ShrubberyCreationForm::getTarget() const
{
	return (_target);
}

void	ShrubberyCreationForm::execute(const Bureaucrat& executor) const
{
	validate(executor);
	std::ofstream file(_target + "_shrubbery");
	if (!file.is_open())
		throw std::runtime_error("Failed to create file: " + _target + "_shrubbery");

	file << 
	"#########################################+..###+.+++.-.--...###+################################+.+##### #######  \n"
	"#############################+########+..+##++++##++#+######++++---.....-+-. #############-.....-####### #######  \n"
	"#++#########################- -######-.##+  #######+ -.##########+. ########+ .-+########+.############+.#######  \n"
	"##.+#######################.-#+. . -####.+##+  .  -+###+-   .  .+###-    . +###+.+######.-###########+ +########  \n"
	"##---   #############..+++###. .+##+.  -##################+######### #+ ###-.   .#+   .#########+-##############  \n"
	"##.####.+#####+-.#- -######+.-########++###########################-+#++##.+#.+#################-+##############  \n"
	"##.#######-+##########-.  .############+###################+######.+#+ +-.## +################+.+###############  \n"
	"##+.+############ ---..-## +###########+#############+#####.####+.+##+-###+.########### ..--..+#################  \n"
	"##+.+----.-####-.#.--++.+##+.-+########+#############.##### +-.-########-.+###########.+########################  \n"
	"##+.#######-----.-+###++######+--.-+##++############# #####++########+.-+###+--#+....-+#########################  \n"
	"###+..++. +#######++..-++###########+++############## ###########+..++###+.-...- +##############################  \n"
	"######### ##############+++. +####################### ######+. .++###+##-..-##+++-##############################  \n"
	"#########+ ++. +##############+ .#################### ###### .+###+ +##+..-####-#-.#############################  \n"
	"##############++################## +################# ###### #########+ -.##++++##-+############################  \n"
	"###############-.###################-.############### ###### #########  .########+  +###########################  \n"
	"#################+ .+. + +####++#####++############## ######+#######-.##########-.-... +########################  \n"
	"##########################-  .#-.++++..##############.#######.##### #####- +##+ ..+-.-.- .---+##################  \n"
	"#####################################++##############-####### +##-.#.    ##### +#- ..+#########-.-+#############  \n"
	"#####################################++##############+#####+. +. +##     +######+++######+..++----.-############  \n"
	"#####################################+-####################.++. .--#    .#########++######-+#####+.-############  \n"
	"#####################################+.######################+ . +########################+-####+-+-############  \n"
	"#####################################-.###############+######+ +#######.. -###  .  +#######.+## ++.#############  \n"
	"#####################################- ##############++#######+ ######+ . +###     +#######--..#+.##############  \n"
	"#####################################- ####++########+.#######+ .+#############   ##########-+# +###############  \n"
	"#####################################-.####++########+.#######+ #..############+-###########+-.#################  \n"
	"#####################################+.####+#########+ #####..... . .#########. .-.+#######+-###################  \n"
	"#####################################++####+##############.+########+ .-.######- .-+-+####+-+###################  \n"
	"#####################################++####.##############.++############++#####+.+.+###-.+#####################  \n"
	"###############################..++++.##### ##############..+###############+++.     -++########################  \n"
	"#############################+-+#####+##### ################+.  ################- .#############################  \n"
	"###########################+    +###+-##### ####################+  +##########+ +. -############################  \n"
	"###################+.  ++-.###### ##+.####+-#####################.-###############+ +###########################  \n"
	"################## ##########+++++ #+ ####+######################++###########++. ---###########################  \n"
	"##############+-+ #########..######+  #### #######################.+#####++###+++###.###########################  \n"
	"###########+.-######+.--.. #########+.#### #######################-+###+.+########## +##########################  \n"
	"###########.######.-################+-###++############## +######## -#+ #############.-#########################  \n"
	"##########+.##### ##################+#### +##############-+#######+...- ##############.+########################  \n"
	"###########. .++-+##################.#### +############### +#####+ .#############+ -### ########################  \n"
	"##########.+######################## ###++################++#####+. +##########+ +++###+.####   -###############  \n"
	"#########-+########################.#### +#################.#######.   ....  .+#### +####+-+####-+##############  \n"
	"#########+.###########++##+.   ..- ####++###################-+#########+.+##++--.    .#########+.###############  \n"
	"##########+ -+++. .-++##########+ #####.+####################+.+#########+.+##########-.++++++ +++##############  \n"
	"####+++-..-+###################-+############+#################-.+#########+.-####################+-..+-+#######  \n"
	"###+###+.-##+.-##############+.+#############+###################+---###+-####+.-##############+###+-####+######  \n"
	"########+. .. -############+.+#############...#########+-+###############+..+####+-.+##########+.   -###########  \n"
	"######+. .- .  +  .######-.+########-...+++#+ #######+.+#++++-...+#########+. +-..-+++..#####....   .. .+#######  \n"
	"###+  -++.    .+#######+   ...--++++########+.#####..+############++-. .+#####+.+##+++-.   .-++++...-###########  \n"
	"#################################  .+ .##### ###. +########################+..    ##############################  \n"
	"###############  .+  ##############  -.  .##..+###+  ++ .########.  #  ############.  ++ .######################  \n"
	"##############+++      .#####+  ..    .+###########++    . .#####++ ..    +########+#+. -..  -##################  \n"
	"############-  ..   .-#########################+   ..   ..+###+  ...  ..########.  ..  . ..-####################  \n"
	"###############################################################################+######++++######################  \n";

	if (!file.good())
		throw std::runtime_error("Failed to write to file: " + _target + "_shrubbery");
	file.close();
}

